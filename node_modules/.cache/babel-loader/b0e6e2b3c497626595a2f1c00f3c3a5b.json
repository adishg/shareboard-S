{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/var/www/html/excalidraw/src/components/LibraryUnit.tsx\",\n    _s = $RefreshSig$();\n\nimport clsx from \"clsx\";\nimport oc from \"open-color\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { close } from \"../components/icons\";\nimport { MIME_TYPES } from \"../constants\";\nimport { t } from \"../i18n\";\nimport useIsMobile from \"../is-mobile\";\nimport { exportToSvg } from \"../scene/export\";\nimport \"./LibraryUnit.scss\"; // fa-plus\n\nconst PLUS_ICON = /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 1792 1792\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    fill: \"currentColor\",\n    d: \"M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 3\n}, this);\n\nexport const LibraryUnit = ({\n  elements,\n  pendingElements,\n  onRemoveFromLibrary,\n  onClick\n}) => {\n  _s();\n\n  const ref = useRef(null);\n  useEffect(() => {\n    const elementsToRender = elements || pendingElements;\n\n    if (!elementsToRender) {\n      return;\n    }\n\n    const svg = exportToSvg(elementsToRender, {\n      exportBackground: false,\n      viewBackgroundColor: oc.white,\n      shouldAddWatermark: false\n    });\n\n    for (const child of ref.current.children) {\n      if (child.tagName !== \"svg\") {\n        continue;\n      }\n\n      ref.current.removeChild(child);\n    }\n\n    ref.current.appendChild(svg);\n    const current = ref.current;\n    return () => {\n      current.removeChild(svg);\n    };\n  }, [elements, pendingElements]);\n  const [isHovered, setIsHovered] = useState(false);\n  const isMobile = useIsMobile();\n\n  const adder = (isHovered || isMobile) && pendingElements && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"library-unit__adder\",\n    children: PLUS_ICON\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: clsx(\"library-unit\", {\n      \"library-unit__active\": elements || pendingElements\n    }),\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: clsx(\"library-unit__dragger\", {\n        \"library-unit__pulse\": !!pendingElements\n      }),\n      ref: ref,\n      draggable: !!elements,\n      onClick: !!elements || !!pendingElements ? onClick : undefined,\n      onDragStart: event => {\n        setIsHovered(false);\n        event.dataTransfer.setData(MIME_TYPES.excalidrawlib, JSON.stringify(elements));\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), adder, elements && (isHovered || isMobile) && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"library-unit__removeFromLibrary\",\n      \"aria-label\": t(\"labels.removeFromLibrary\"),\n      onClick: onRemoveFromLibrary,\n      children: close\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LibraryUnit, \"eqD5qUxtbjIvrr8J2QNjz3dwGgo=\", false, function () {\n  return [useIsMobile];\n});\n\n_c = LibraryUnit;\n\nvar _c;\n\n$RefreshReg$(_c, \"LibraryUnit\");","map":{"version":3,"sources":["/var/www/html/excalidraw/src/components/LibraryUnit.tsx"],"names":["clsx","oc","React","useEffect","useRef","useState","close","MIME_TYPES","t","useIsMobile","exportToSvg","PLUS_ICON","LibraryUnit","elements","pendingElements","onRemoveFromLibrary","onClick","ref","elementsToRender","svg","exportBackground","viewBackgroundColor","white","shouldAddWatermark","child","current","children","tagName","removeChild","appendChild","isHovered","setIsHovered","isMobile","adder","undefined","event","dataTransfer","setData","excalidrawlib","JSON","stringify"],"mappings":"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","sourcesContent":["import clsx from \"clsx\";\nimport oc from \"open-color\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { close } from \"../components/icons\";\nimport { MIME_TYPES } from \"../constants\";\nimport { t } from \"../i18n\";\nimport useIsMobile from \"../is-mobile\";\nimport { exportToSvg } from \"../scene/export\";\nimport { LibraryItem } from \"../types\";\nimport \"./LibraryUnit.scss\";\n\n// fa-plus\nconst PLUS_ICON = (\n  <svg viewBox=\"0 0 1792 1792\">\n    <path\n      fill=\"currentColor\"\n      d=\"M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z\"\n    />\n  </svg>\n);\n\nexport const LibraryUnit = ({\n  elements,\n  pendingElements,\n  onRemoveFromLibrary,\n  onClick,\n}: {\n  elements?: LibraryItem;\n  pendingElements?: LibraryItem;\n  onRemoveFromLibrary: () => void;\n  onClick: () => void;\n}) => {\n  const ref = useRef<HTMLDivElement | null>(null);\n  useEffect(() => {\n    const elementsToRender = elements || pendingElements;\n    if (!elementsToRender) {\n      return;\n    }\n    const svg = exportToSvg(elementsToRender, {\n      exportBackground: false,\n      viewBackgroundColor: oc.white,\n      shouldAddWatermark: false,\n    });\n    for (const child of ref.current!.children) {\n      if (child.tagName !== \"svg\") {\n        continue;\n      }\n      ref.current!.removeChild(child);\n    }\n    ref.current!.appendChild(svg);\n\n    const current = ref.current!;\n    return () => {\n      current.removeChild(svg);\n    };\n  }, [elements, pendingElements]);\n\n  const [isHovered, setIsHovered] = useState(false);\n  const isMobile = useIsMobile();\n\n  const adder = (isHovered || isMobile) && pendingElements && (\n    <div className=\"library-unit__adder\">{PLUS_ICON}</div>\n  );\n\n  return (\n    <div\n      className={clsx(\"library-unit\", {\n        \"library-unit__active\": elements || pendingElements,\n      })}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      <div\n        className={clsx(\"library-unit__dragger\", {\n          \"library-unit__pulse\": !!pendingElements,\n        })}\n        ref={ref}\n        draggable={!!elements}\n        onClick={!!elements || !!pendingElements ? onClick : undefined}\n        onDragStart={(event) => {\n          setIsHovered(false);\n          event.dataTransfer.setData(\n            MIME_TYPES.excalidrawlib,\n            JSON.stringify(elements),\n          );\n        }}\n      />\n      {adder}\n      {elements && (isHovered || isMobile) && (\n        <button\n          className=\"library-unit__removeFromLibrary\"\n          aria-label={t(\"labels.removeFromLibrary\")}\n          onClick={onRemoveFromLibrary}\n        >\n          {close}\n        </button>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}