{"ast":null,"code":"import oc from \"open-color\";\nimport { DEFAULT_FONT_FAMILY, DEFAULT_FONT_SIZE, DEFAULT_TEXT_ALIGN } from \"./constants\";\nimport { t } from \"./i18n\";\nimport { getDateTime } from \"./utils\";\nexport const getDefaultAppState = () => {\n  return {\n    appearance: \"light\",\n    collaborators: new Map(),\n    currentChartType: \"bar\",\n    currentItemBackgroundColor: \"transparent\",\n    currentItemEndArrowhead: \"arrow\",\n    currentItemFillStyle: \"hachure\",\n    currentItemFontFamily: DEFAULT_FONT_FAMILY,\n    currentItemFontSize: DEFAULT_FONT_SIZE,\n    currentItemLinearStrokeSharpness: \"round\",\n    currentItemOpacity: 100,\n    currentItemRoughness: 1,\n    currentItemStartArrowhead: null,\n    currentItemStrokeColor: oc.black,\n    currentItemStrokeSharpness: \"sharp\",\n    currentItemStrokeStyle: \"solid\",\n    currentItemStrokeWidth: 1,\n    currentItemTextAlign: DEFAULT_TEXT_ALIGN,\n    cursorButton: \"up\",\n    draggingElement: null,\n    editingElement: null,\n    editingGroupId: null,\n    editingLinearElement: null,\n    elementLocked: false,\n    elementType: \"selection\",\n    errorMessage: null,\n    exportBackground: true,\n    exportEmbedScene: false,\n    fileHandle: null,\n    gridSize: null,\n    height: window.innerHeight,\n    isBindingEnabled: true,\n    isLibraryOpen: false,\n    isLoading: false,\n    isResizing: false,\n    isRotating: false,\n    lastPointerDownWith: \"mouse\",\n    multiElement: null,\n    name: `${t(\"labels.untitled\")}-${getDateTime()}`,\n    openMenu: null,\n    pasteDialog: {\n      shown: false,\n      data: null\n    },\n    previousSelectedElementIds: {},\n    resizingElement: null,\n    scrolledOutside: false,\n    scrollX: 0,\n    scrollY: 0,\n    selectedElementIds: {},\n    selectedGroupIds: {},\n    selectionElement: null,\n    shouldAddWatermark: false,\n    shouldCacheIgnoreZoom: false,\n    showShortcutsDialog: false,\n    showStats: false,\n    startBoundElement: null,\n    suggestedBindings: [],\n    toastMessage: null,\n    viewBackgroundColor: oc.white,\n    width: window.innerWidth,\n    zenModeEnabled: false,\n    zoom: {\n      value: 1,\n      translation: {\n        x: 0,\n        y: 0\n      }\n    }\n  };\n};\n/**\n * Config containing all AppState keys. Used to determine whether given state\n *  prop should be stripped when exporting to given storage type.\n */\n\nconst APP_STATE_STORAGE_CONF = (config => config)({\n  appearance: {\n    browser: true,\n    export: false\n  },\n  collaborators: {\n    browser: false,\n    export: false\n  },\n  currentChartType: {\n    browser: true,\n    export: false\n  },\n  currentItemBackgroundColor: {\n    browser: true,\n    export: false\n  },\n  currentItemEndArrowhead: {\n    browser: true,\n    export: false\n  },\n  currentItemFillStyle: {\n    browser: true,\n    export: false\n  },\n  currentItemFontFamily: {\n    browser: true,\n    export: false\n  },\n  currentItemFontSize: {\n    browser: true,\n    export: false\n  },\n  currentItemLinearStrokeSharpness: {\n    browser: true,\n    export: false\n  },\n  currentItemOpacity: {\n    browser: true,\n    export: false\n  },\n  currentItemRoughness: {\n    browser: true,\n    export: false\n  },\n  currentItemStartArrowhead: {\n    browser: true,\n    export: false\n  },\n  currentItemStrokeColor: {\n    browser: true,\n    export: false\n  },\n  currentItemStrokeSharpness: {\n    browser: true,\n    export: false\n  },\n  currentItemStrokeStyle: {\n    browser: true,\n    export: false\n  },\n  currentItemStrokeWidth: {\n    browser: true,\n    export: false\n  },\n  currentItemTextAlign: {\n    browser: true,\n    export: false\n  },\n  cursorButton: {\n    browser: true,\n    export: false\n  },\n  draggingElement: {\n    browser: false,\n    export: false\n  },\n  editingElement: {\n    browser: false,\n    export: false\n  },\n  editingGroupId: {\n    browser: true,\n    export: false\n  },\n  editingLinearElement: {\n    browser: false,\n    export: false\n  },\n  elementLocked: {\n    browser: true,\n    export: false\n  },\n  elementType: {\n    browser: true,\n    export: false\n  },\n  errorMessage: {\n    browser: false,\n    export: false\n  },\n  exportBackground: {\n    browser: true,\n    export: false\n  },\n  exportEmbedScene: {\n    browser: true,\n    export: false\n  },\n  fileHandle: {\n    browser: false,\n    export: false\n  },\n  gridSize: {\n    browser: true,\n    export: true\n  },\n  height: {\n    browser: false,\n    export: false\n  },\n  isBindingEnabled: {\n    browser: false,\n    export: false\n  },\n  isLibraryOpen: {\n    browser: false,\n    export: false\n  },\n  isLoading: {\n    browser: false,\n    export: false\n  },\n  isResizing: {\n    browser: false,\n    export: false\n  },\n  isRotating: {\n    browser: false,\n    export: false\n  },\n  lastPointerDownWith: {\n    browser: true,\n    export: false\n  },\n  multiElement: {\n    browser: false,\n    export: false\n  },\n  name: {\n    browser: true,\n    export: false\n  },\n  offsetLeft: {\n    browser: false,\n    export: false\n  },\n  offsetTop: {\n    browser: false,\n    export: false\n  },\n  openMenu: {\n    browser: true,\n    export: false\n  },\n  pasteDialog: {\n    browser: false,\n    export: false\n  },\n  previousSelectedElementIds: {\n    browser: true,\n    export: false\n  },\n  resizingElement: {\n    browser: false,\n    export: false\n  },\n  scrolledOutside: {\n    browser: true,\n    export: false\n  },\n  scrollX: {\n    browser: true,\n    export: false\n  },\n  scrollY: {\n    browser: true,\n    export: false\n  },\n  selectedElementIds: {\n    browser: true,\n    export: false\n  },\n  selectedGroupIds: {\n    browser: true,\n    export: false\n  },\n  selectionElement: {\n    browser: false,\n    export: false\n  },\n  shouldAddWatermark: {\n    browser: true,\n    export: false\n  },\n  shouldCacheIgnoreZoom: {\n    browser: true,\n    export: false\n  },\n  showShortcutsDialog: {\n    browser: false,\n    export: false\n  },\n  showStats: {\n    browser: true,\n    export: false\n  },\n  startBoundElement: {\n    browser: false,\n    export: false\n  },\n  suggestedBindings: {\n    browser: false,\n    export: false\n  },\n  toastMessage: {\n    browser: false,\n    export: false\n  },\n  viewBackgroundColor: {\n    browser: true,\n    export: true\n  },\n  width: {\n    browser: false,\n    export: false\n  },\n  zenModeEnabled: {\n    browser: true,\n    export: false\n  },\n  zoom: {\n    browser: true,\n    export: false\n  }\n});\n\nconst _clearAppStateForStorage = (appState, exportType) => {\n  const stateForExport = {};\n\n  for (const key of Object.keys(appState)) {\n    const propConfig = APP_STATE_STORAGE_CONF[key];\n\n    if (propConfig === null || propConfig === void 0 ? void 0 : propConfig[exportType]) {\n      // @ts-ignore see https://github.com/microsoft/TypeScript/issues/31445\n      stateForExport[key] = appState[key];\n    }\n  }\n\n  return stateForExport;\n};\n\nexport const clearAppStateForLocalStorage = appState => {\n  return _clearAppStateForStorage(appState, \"browser\");\n};\nexport const cleanAppStateForExport = appState => {\n  return _clearAppStateForStorage(appState, \"export\");\n};","map":{"version":3,"sources":["/var/www/html/excalidraw/src/appState.ts"],"names":["oc","DEFAULT_FONT_FAMILY","DEFAULT_FONT_SIZE","DEFAULT_TEXT_ALIGN","t","getDateTime","getDefaultAppState","appearance","collaborators","Map","currentChartType","currentItemBackgroundColor","currentItemEndArrowhead","currentItemFillStyle","currentItemFontFamily","currentItemFontSize","currentItemLinearStrokeSharpness","currentItemOpacity","currentItemRoughness","currentItemStartArrowhead","currentItemStrokeColor","black","currentItemStrokeSharpness","currentItemStrokeStyle","currentItemStrokeWidth","currentItemTextAlign","cursorButton","draggingElement","editingElement","editingGroupId","editingLinearElement","elementLocked","elementType","errorMessage","exportBackground","exportEmbedScene","fileHandle","gridSize","height","window","innerHeight","isBindingEnabled","isLibraryOpen","isLoading","isResizing","isRotating","lastPointerDownWith","multiElement","name","openMenu","pasteDialog","shown","data","previousSelectedElementIds","resizingElement","scrolledOutside","scrollX","scrollY","selectedElementIds","selectedGroupIds","selectionElement","shouldAddWatermark","shouldCacheIgnoreZoom","showShortcutsDialog","showStats","startBoundElement","suggestedBindings","toastMessage","viewBackgroundColor","white","width","innerWidth","zenModeEnabled","zoom","value","translation","x","y","APP_STATE_STORAGE_CONF","config","browser","export","offsetLeft","offsetTop","_clearAppStateForStorage","appState","exportType","stateForExport","key","Object","keys","propConfig","clearAppStateForLocalStorage","cleanAppStateForExport"],"mappings":"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","sourcesContent":["import oc from \"open-color\";\nimport {\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE,\n  DEFAULT_TEXT_ALIGN,\n} from \"./constants\";\nimport { t } from \"./i18n\";\nimport { AppState, FlooredNumber, NormalizedZoomValue } from \"./types\";\nimport { getDateTime } from \"./utils\";\n\nexport const getDefaultAppState = (): Omit<\n  AppState,\n  \"offsetTop\" | \"offsetLeft\"\n> => {\n  return {\n    appearance: \"light\",\n    collaborators: new Map(),\n    currentChartType: \"bar\",\n    currentItemBackgroundColor: \"transparent\",\n    currentItemEndArrowhead: \"arrow\",\n    currentItemFillStyle: \"hachure\",\n    currentItemFontFamily: DEFAULT_FONT_FAMILY,\n    currentItemFontSize: DEFAULT_FONT_SIZE,\n    currentItemLinearStrokeSharpness: \"round\",\n    currentItemOpacity: 100,\n    currentItemRoughness: 1,\n    currentItemStartArrowhead: null,\n    currentItemStrokeColor: oc.black,\n    currentItemStrokeSharpness: \"sharp\",\n    currentItemStrokeStyle: \"solid\",\n    currentItemStrokeWidth: 1,\n    currentItemTextAlign: DEFAULT_TEXT_ALIGN,\n    cursorButton: \"up\",\n    draggingElement: null,\n    editingElement: null,\n    editingGroupId: null,\n    editingLinearElement: null,\n    elementLocked: false,\n    elementType: \"selection\",\n    errorMessage: null,\n    exportBackground: true,\n    exportEmbedScene: false,\n    fileHandle: null,\n    gridSize: null,\n    height: window.innerHeight,\n    isBindingEnabled: true,\n    isLibraryOpen: false,\n    isLoading: false,\n    isResizing: false,\n    isRotating: false,\n    lastPointerDownWith: \"mouse\",\n    multiElement: null,\n    name: `${t(\"labels.untitled\")}-${getDateTime()}`,\n    openMenu: null,\n    pasteDialog: { shown: false, data: null },\n    previousSelectedElementIds: {},\n    resizingElement: null,\n    scrolledOutside: false,\n    scrollX: 0 as FlooredNumber,\n    scrollY: 0 as FlooredNumber,\n    selectedElementIds: {},\n    selectedGroupIds: {},\n    selectionElement: null,\n    shouldAddWatermark: false,\n    shouldCacheIgnoreZoom: false,\n    showShortcutsDialog: false,\n    showStats: false,\n    startBoundElement: null,\n    suggestedBindings: [],\n    toastMessage: null,\n    viewBackgroundColor: oc.white,\n    width: window.innerWidth,\n    zenModeEnabled: false,\n    zoom: { value: 1 as NormalizedZoomValue, translation: { x: 0, y: 0 } },\n  };\n};\n\n/**\n * Config containing all AppState keys. Used to determine whether given state\n *  prop should be stripped when exporting to given storage type.\n */\nconst APP_STATE_STORAGE_CONF = (<\n  Values extends {\n    /** whether to keep when storing to browser storage (localStorage/IDB) */\n    browser: boolean;\n    /** whether to keep when exporting to file/database */\n    export: boolean;\n  },\n  T extends Record<keyof AppState, Values>\n>(\n  config: { [K in keyof T]: K extends keyof AppState ? T[K] : never },\n) => config)({\n  appearance: { browser: true, export: false },\n  collaborators: { browser: false, export: false },\n  currentChartType: { browser: true, export: false },\n  currentItemBackgroundColor: { browser: true, export: false },\n  currentItemEndArrowhead: { browser: true, export: false },\n  currentItemFillStyle: { browser: true, export: false },\n  currentItemFontFamily: { browser: true, export: false },\n  currentItemFontSize: { browser: true, export: false },\n  currentItemLinearStrokeSharpness: { browser: true, export: false },\n  currentItemOpacity: { browser: true, export: false },\n  currentItemRoughness: { browser: true, export: false },\n  currentItemStartArrowhead: { browser: true, export: false },\n  currentItemStrokeColor: { browser: true, export: false },\n  currentItemStrokeSharpness: { browser: true, export: false },\n  currentItemStrokeStyle: { browser: true, export: false },\n  currentItemStrokeWidth: { browser: true, export: false },\n  currentItemTextAlign: { browser: true, export: false },\n  cursorButton: { browser: true, export: false },\n  draggingElement: { browser: false, export: false },\n  editingElement: { browser: false, export: false },\n  editingGroupId: { browser: true, export: false },\n  editingLinearElement: { browser: false, export: false },\n  elementLocked: { browser: true, export: false },\n  elementType: { browser: true, export: false },\n  errorMessage: { browser: false, export: false },\n  exportBackground: { browser: true, export: false },\n  exportEmbedScene: { browser: true, export: false },\n  fileHandle: { browser: false, export: false },\n  gridSize: { browser: true, export: true },\n  height: { browser: false, export: false },\n  isBindingEnabled: { browser: false, export: false },\n  isLibraryOpen: { browser: false, export: false },\n  isLoading: { browser: false, export: false },\n  isResizing: { browser: false, export: false },\n  isRotating: { browser: false, export: false },\n  lastPointerDownWith: { browser: true, export: false },\n  multiElement: { browser: false, export: false },\n  name: { browser: true, export: false },\n  offsetLeft: { browser: false, export: false },\n  offsetTop: { browser: false, export: false },\n  openMenu: { browser: true, export: false },\n  pasteDialog: { browser: false, export: false },\n  previousSelectedElementIds: { browser: true, export: false },\n  resizingElement: { browser: false, export: false },\n  scrolledOutside: { browser: true, export: false },\n  scrollX: { browser: true, export: false },\n  scrollY: { browser: true, export: false },\n  selectedElementIds: { browser: true, export: false },\n  selectedGroupIds: { browser: true, export: false },\n  selectionElement: { browser: false, export: false },\n  shouldAddWatermark: { browser: true, export: false },\n  shouldCacheIgnoreZoom: { browser: true, export: false },\n  showShortcutsDialog: { browser: false, export: false },\n  showStats: { browser: true, export: false },\n  startBoundElement: { browser: false, export: false },\n  suggestedBindings: { browser: false, export: false },\n  toastMessage: { browser: false, export: false },\n  viewBackgroundColor: { browser: true, export: true },\n  width: { browser: false, export: false },\n  zenModeEnabled: { browser: true, export: false },\n  zoom: { browser: true, export: false },\n});\n\nconst _clearAppStateForStorage = <ExportType extends \"export\" | \"browser\">(\n  appState: Partial<AppState>,\n  exportType: ExportType,\n) => {\n  type ExportableKeys = {\n    [K in keyof typeof APP_STATE_STORAGE_CONF]: typeof APP_STATE_STORAGE_CONF[K][ExportType] extends true\n      ? K\n      : never;\n  }[keyof typeof APP_STATE_STORAGE_CONF];\n  const stateForExport = {} as { [K in ExportableKeys]?: typeof appState[K] };\n  for (const key of Object.keys(appState) as (keyof typeof appState)[]) {\n    const propConfig = APP_STATE_STORAGE_CONF[key];\n    if (propConfig?.[exportType]) {\n      // @ts-ignore see https://github.com/microsoft/TypeScript/issues/31445\n      stateForExport[key] = appState[key];\n    }\n  }\n  return stateForExport;\n};\n\nexport const clearAppStateForLocalStorage = (appState: Partial<AppState>) => {\n  return _clearAppStateForStorage(appState, \"browser\");\n};\n\nexport const cleanAppStateForExport = (appState: Partial<AppState>) => {\n  return _clearAppStateForStorage(appState, \"export\");\n};\n"]},"metadata":{},"sourceType":"module"}