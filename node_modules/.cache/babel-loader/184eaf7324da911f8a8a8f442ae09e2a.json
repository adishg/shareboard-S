{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/var/www/html/excalidraw/src/components/Stats.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { getCommonBounds } from \"../element/bounds\";\nimport { getElementsStorageSize, getTotalStorageSize } from \"../excalidraw-app/data/localStorage\";\nimport { t } from \"../i18n\";\nimport useIsMobile from \"../is-mobile\";\nimport { getTargetElements } from \"../scene\";\nimport { debounce, nFormatter } from \"../utils\";\nimport { close } from \"./icons\";\nimport { Island } from \"./Island\";\nimport \"./Stats.scss\";\nconst getStorageSizes = debounce(cb => {\n  cb({\n    scene: getElementsStorageSize(),\n    total: getTotalStorageSize()\n  });\n}, 500);\nexport const Stats = props => {\n  _s();\n\n  const isMobile = useIsMobile();\n  const [storageSizes, setStorageSizes] = useState({\n    scene: 0,\n    total: 0\n  });\n  useEffect(() => {\n    getStorageSizes(sizes => {\n      setStorageSizes(sizes);\n    });\n  });\n  useEffect(() => () => getStorageSizes.cancel(), []);\n  const boundingBox = getCommonBounds(props.elements);\n  const selectedElements = getTargetElements(props.elements, props.appState);\n  const selectedBoundingBox = getCommonBounds(selectedElements);\n\n  if (isMobile && props.appState.openMenu) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Stats\",\n    children: /*#__PURE__*/_jsxDEV(Island, {\n      padding: 2,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"close\",\n        onClick: props.onClose,\n        children: close\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: t(\"stats.title\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: 2,\n              children: t(\"stats.scene\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: t(\"stats.elements\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: props.elements.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: t(\"stats.width\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: Math.round(boundingBox[2]) - Math.round(boundingBox[0])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: t(\"stats.height\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: Math.round(boundingBox[3]) - Math.round(boundingBox[1])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: 2,\n              children: t(\"stats.storage\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: t(\"stats.scene\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: nFormatter(storageSizes.scene, 1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: t(\"stats.total\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: nFormatter(storageSizes.total, 1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), selectedElements.length === 1 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: 2,\n              children: t(\"stats.element\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), selectedElements.length > 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"th\", {\n                colSpan: 2,\n                children: t(\"stats.selected\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: t(\"stats.elements\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: selectedElements.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), selectedElements.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"x\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: Math.round(selectedElements.length === 1 ? selectedElements[0].x : selectedBoundingBox[0])\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: Math.round(selectedElements.length === 1 ? selectedElements[0].y : selectedBoundingBox[1])\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: t(\"stats.width\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: Math.round(selectedElements.length === 1 ? selectedElements[0].width : selectedBoundingBox[2] - selectedBoundingBox[0])\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: t(\"stats.height\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: Math.round(selectedElements.length === 1 ? selectedElements[0].height : selectedBoundingBox[3] - selectedBoundingBox[1])\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), selectedElements.length === 1 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: t(\"stats.angle\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: `${Math.round(selectedElements[0].angle * 180 / Math.PI)}°`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Stats, \"5/OUNdDM0R2eCXZSvIeibjaiRkQ=\", false, function () {\n  return [useIsMobile];\n});\n\n_c = Stats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stats\");","map":{"version":3,"sources":["/var/www/html/excalidraw/src/components/Stats.tsx"],"names":["React","useEffect","useState","getCommonBounds","getElementsStorageSize","getTotalStorageSize","t","useIsMobile","getTargetElements","debounce","nFormatter","close","Island","getStorageSizes","cb","scene","total","Stats","props","isMobile","storageSizes","setStorageSizes","sizes","cancel","boundingBox","elements","selectedElements","appState","selectedBoundingBox","openMenu","onClose","length","Math","round","x","y","width","height","angle","PI"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { getCommonBounds } from \"../element/bounds\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport {\n  getElementsStorageSize,\n  getTotalStorageSize,\n} from \"../excalidraw-app/data/localStorage\";\nimport { t } from \"../i18n\";\nimport useIsMobile from \"../is-mobile\";\nimport { getTargetElements } from \"../scene\";\nimport { AppState } from \"../types\";\nimport { debounce, nFormatter } from \"../utils\";\nimport { close } from \"./icons\";\nimport { Island } from \"./Island\";\nimport \"./Stats.scss\";\n\ntype StorageSizes = { scene: number; total: number };\n\nconst getStorageSizes = debounce((cb: (sizes: StorageSizes) => void) => {\n  cb({\n    scene: getElementsStorageSize(),\n    total: getTotalStorageSize(),\n  });\n}, 500);\n\nexport const Stats = (props: {\n  appState: AppState;\n  elements: readonly NonDeletedExcalidrawElement[];\n  onClose: () => void;\n}) => {\n  const isMobile = useIsMobile();\n  const [storageSizes, setStorageSizes] = useState<StorageSizes>({\n    scene: 0,\n    total: 0,\n  });\n\n  useEffect(() => {\n    getStorageSizes((sizes) => {\n      setStorageSizes(sizes);\n    });\n  });\n\n  useEffect(() => () => getStorageSizes.cancel(), []);\n\n  const boundingBox = getCommonBounds(props.elements);\n  const selectedElements = getTargetElements(props.elements, props.appState);\n  const selectedBoundingBox = getCommonBounds(selectedElements);\n\n  if (isMobile && props.appState.openMenu) {\n    return null;\n  }\n\n  return (\n    <div className=\"Stats\">\n      <Island padding={2}>\n        <div className=\"close\" onClick={props.onClose}>\n          {close}\n        </div>\n        <h3>{t(\"stats.title\")}</h3>\n        <table>\n          <tbody>\n            <tr>\n              <th colSpan={2}>{t(\"stats.scene\")}</th>\n            </tr>\n            <tr>\n              <td>{t(\"stats.elements\")}</td>\n              <td>{props.elements.length}</td>\n            </tr>\n            <tr>\n              <td>{t(\"stats.width\")}</td>\n              <td>{Math.round(boundingBox[2]) - Math.round(boundingBox[0])}</td>\n            </tr>\n            <tr>\n              <td>{t(\"stats.height\")}</td>\n              <td>{Math.round(boundingBox[3]) - Math.round(boundingBox[1])}</td>\n            </tr>\n            <tr>\n              <th colSpan={2}>{t(\"stats.storage\")}</th>\n            </tr>\n            <tr>\n              <td>{t(\"stats.scene\")}</td>\n              <td>{nFormatter(storageSizes.scene, 1)}</td>\n            </tr>\n            <tr>\n              <td>{t(\"stats.total\")}</td>\n              <td>{nFormatter(storageSizes.total, 1)}</td>\n            </tr>\n            {selectedElements.length === 1 && (\n              <tr>\n                <th colSpan={2}>{t(\"stats.element\")}</th>\n              </tr>\n            )}\n\n            {selectedElements.length > 1 && (\n              <>\n                <tr>\n                  <th colSpan={2}>{t(\"stats.selected\")}</th>\n                </tr>\n                <tr>\n                  <td>{t(\"stats.elements\")}</td>\n                  <td>{selectedElements.length}</td>\n                </tr>\n              </>\n            )}\n            {selectedElements.length > 0 && (\n              <>\n                <tr>\n                  <td>{\"x\"}</td>\n                  <td>\n                    {Math.round(\n                      selectedElements.length === 1\n                        ? selectedElements[0].x\n                        : selectedBoundingBox[0],\n                    )}\n                  </td>\n                </tr>\n                <tr>\n                  <td>{\"y\"}</td>\n                  <td>\n                    {Math.round(\n                      selectedElements.length === 1\n                        ? selectedElements[0].y\n                        : selectedBoundingBox[1],\n                    )}\n                  </td>\n                </tr>\n                <tr>\n                  <td>{t(\"stats.width\")}</td>\n                  <td>\n                    {Math.round(\n                      selectedElements.length === 1\n                        ? selectedElements[0].width\n                        : selectedBoundingBox[2] - selectedBoundingBox[0],\n                    )}\n                  </td>\n                </tr>\n                <tr>\n                  <td>{t(\"stats.height\")}</td>\n                  <td>\n                    {Math.round(\n                      selectedElements.length === 1\n                        ? selectedElements[0].height\n                        : selectedBoundingBox[3] - selectedBoundingBox[1],\n                    )}\n                  </td>\n                </tr>\n              </>\n            )}\n            {selectedElements.length === 1 && (\n              <tr>\n                <td>{t(\"stats.angle\")}</td>\n                <td>\n                  {`${Math.round(\n                    (selectedElements[0].angle * 180) / Math.PI,\n                  )}°`}\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </Island>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}